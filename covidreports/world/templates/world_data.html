{% extends "layout.html" %}

{% block title %}{{title}} {% endblock %}


{% block content %}

    <h2>{{title}} by Country</h2>

    <div class="data-table">
        <table class="table data-table table-striped">
            <thead>
                <tr>
                    <th class="header-row">Country</th>
                    <th class="header-row">New Confirmed</th>
                    <th class="header-row">Total Confirmed</th>
                    <th class="header-row">New Deaths</th>
                    <th class="header-row">Total Deaths</th>
                    <th class="header-row">New Recovered</th>
                    <th class="header-row">Total Recovered</th>
                </tr>  
            </thead>
            {% if url_for('world.index', url="/cases") %}
                
                {% for nation in data|sort(reverse=true, attribute="TotalConfirmed") %}
                    <!--Table for summary data-->
                    <tbody>
                        <tr>
                            <td class="country_name"><a href="{{ url_for('world.country_history', country=nation.Slug )}}">{{nation.Country}}</a></td>
                            <td>{{nation.NewConfirmed}}</td>
                            <td>{{nation.TotalConfirmed}}</td>
                            <td>{{nation.NewDeaths}}</td>
                            <td>{{nation.TotalDeaths}}</td>
                            <td>{{nation.NewRecovered}}</td>
                            <td>{{nation.TotalRecovered}}</td>
                        </tr>
                    </tbody>
                {% endfor %}
            {% elif url_for('world.index', url="/deaths") %}
                {% for nation in data|sort(reverse=true, attribute="TotalDeaths") %}
                    <!--Table for summary data-->
                    <tbody>
                        <tr>
                            <td class="country_name"><a href="{{ url_for('world.country_history', country=nation.Slug )}}">{{nation.Country}}</a></td>
                            <td>{{nation.NewConfirmed}}</td>
                            <td>{{nation.TotalConfirmed}}</td>
                            <td>{{nation.NewDeaths}}</td>
                            <td>{{nation.TotalDeaths}}</td>
                            <td>{{nation.NewRecovered}}</td>
                            <td>{{nation.TotalRecovered}}</td>
                        </tr>
                    </tbody>
                {% endfor %}
            {% elif url_for('world.index', url="/recoveries") %}
                {% for nation in data|sort(reverse=true, attribute="TotalRecovered") %}
                    <!--Table for summary data-->
                    <tbody>
                        <tr>
                            <td class="country_name"><a href="{{ url_for('world.country_history', country=nation.Slug )}}">{{nation.Country}}</a></td>
                            <td>{{nation.NewConfirmed}}</td>
                            <td>{{nation.TotalConfirmed}}</td>
                            <td>{{nation.NewDeaths}}</td>
                            <td>{{nation.TotalDeaths}}</td>
                            <td>{{nation.NewRecovered}}</td>
                            <td>{{nation.TotalRecovered}}</td>
                        </tr>
                    </tbody>
                {% endfor %}    
            {% else %}    
                {% for nation in data|sort(attribute="Country") %}
                    <!--Table for summary data-->
                    <tbody>
                        <tr>
                            <td class="country_name"><a href="{{ url_for('world.country_history', country=nation.Slug )}}">{{nation.Country}}</a></td>
                            <td>{{nation.NewConfirmed}}</td>
                            <td>{{nation.TotalConfirmed}}</td>
                            <td>{{nation.NewDeaths}}</td>
                            <td>{{nation.TotalDeaths}}</td>
                            <td>{{nation.NewRecovered}}</td>
                            <td>{{nation.TotalRecovered}}</td>
                        </tr>
                    </tbody>
                {% endfor %}
            {% endif %}
        </table>   
    </div>

{% endblock %}
 